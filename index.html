<script src="http://www.torypeterschild.com/s/drawlib2.js"></script>

<html>
<head>
<title>The Cartoonist</title>
</head>

<body>
  <canvas id="canvas" width="400" height="400"></canvas>
  <div id="buttonWrapper">
    <input type="button" id="lost" value="lose mind">      
    <input type="button" id="smile" value="smile">
    <input type="button" id="silly" value="silly eyes"> 
    <input type="button" id="tap" value="tap">
    <input type="button" id="dance" value="dance">
    <input type="button" id="stop" value="stop">
  </div>
</body>

</html>


<script type="text/javascript">
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext('2d');
  var raf;
  var running = false;
  var startTime = (new Date()).getTime() / 1000, time = startTime;
  var intervalSmile, intervalTap, intervalHips, intervalMind, intervalEyes;

  var head = {
    x: 200,
    y: 100,
    vx: 5,
    vy: 5,
    radiusX: 40,
    radiusY: 50,
    color: 'black',
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 1;
      ctx.strokeStyle = "black";
      ctx.ellipse(this.x, this.y, this.radiusX, this.radiusY, 1 * Math.PI/180, 0, 2 * Math.PI);
      ctx.closePath();
      ctx.stroke();
      ctx.closePath();
    }
  };

  var hair = {
    x: head.x,
    y: head.y - head.radiusY,
    color: 'purple',
    draw: function() {
      ctx.lineWidth = 1;
      ctx.strokeStyle = "purple";
      ctx.beginPath();

      // left hair
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x-5, this.y-5);
      ctx.lineTo(this.x-4, this.y-12);

      // right hair
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x+7, this.y-10);
      ctx.lineTo(this.x+5, this.y-12);

      // middle hair
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x, this.y-10);
      ctx.lineTo(this.x+2, this.y-15);
      ctx.lineTo(this.x-2, this.y-18);
      ctx.stroke();
      ctx.closePath();
    }
  };

  var eyes = {
    x: head.x, // 200
    y: head.y - (head.y/5), // 65
    vx: 1,
    vy: 1,
    radius: 2,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.fillStyle = "black";
      ctx.arc(this.x - 10, this.y, this.radius, 0, Math.PI*2, true);
      ctx.fill();
      ctx.closePath();
      ctx.beginPath();
      ctx.fillStyle = "black";
      ctx.arc(this.x + 10, this.y, this.radius, 0, Math.PI*2, true);
      ctx.fill();
      ctx.closePath();
    }
  };

  var eyeballs = {
    x: eyes.x,
    y: eyes.y,
    radiusX: head.radiusX/8,
    radiusY: head.radiusY/5,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 1;
      ctx.strokeStyle = "black";
      ctx.ellipse(this.x-10, this.y, this.radiusX, this.radiusY, 1 * Math.PI/180, 0, 2 * Math.PI);
      ctx.stroke();
      ctx.beginPath();
      ctx.strokeStyle = "black";
      ctx.ellipse(this.x+10, this.y, this.radiusX, this.radiusY, 1 * Math.PI/180, 0, 2 * Math.PI);
      ctx.stroke();
      ctx.closePath();
    }
  };

  var mouth = {
    x: head.x,
    y: head.y + 5,
    vx: 5,
    vy: 1,
    radius: 20,
    angle: 45,
    length: Math.PI / 2,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.beginPath();
      ctx.lineWidth = 1;
      ctx.arc(this.x, this.y, this.radius, this.angle, this.length, false);
      ctx.stroke();
    }
  };

  var body = {
    x: head.x, // 200
    y: head.y + 25, // 75
    vx: 5,
    vy: 1,
    color: 'black',
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x, this.y + 105)
      ctx.stroke();
    }
  };

  var shoulders = {
    x: body.x, // 200
    y: body.y + 25, // 100
    vx: 5,
    vy: 1,
    color: 'black',
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x - 30, this.y);
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x + 30, this.y);
      ctx.stroke();
    }
  };

  var forearms = {
    lx: shoulders.x - 30, // 170
    ly: shoulders.y, // 100
    rx: shoulders.x + 30, // 230
    ry: shoulders.y, // 100
    vx: 5,
    vy: 1,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.lx, this.ly + 50);
      ctx.moveTo(this.rx, this.ry);
      ctx.lineTo(this.rx, this.ry + 50);
      ctx.stroke();
    }
  };

  var hands = {
    lx: forearms.lx, // 170
    ly: forearms.ly + 50, // 150
    rx: forearms.rx, // 230
    ry: forearms.ry + 50, // 150
    vx: 5,
    vy: 1,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.lx - 5, this.ly);
      ctx.moveTo(this.rx, this.ry);
      ctx.lineTo(this.rx + 5, this.ry);
      ctx.stroke();
    }
  };

  var hips = {
    x: body.x, // 200
    y: body.y + 105, // 180
    elx: body.x - 20,
    erx: body.x + 20,
    ely: body.y + 105,
    ery: body.y + 105,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.elx, this.ely);
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.erx, this.ery);
      ctx.stroke();
    }
  };

  var uLegs = {
    lx: hips.x - 20, // 180
    ly: hips.y, // 180
    rx: hips.x + 20, // 220
    ry: hips.y, // 180
    vx: 5,
    vy: 1,
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.lx - 10, this.ly + 70);
      ctx.moveTo(this.rx, this.ry);
      ctx.lineTo(this.rx + 10, this.ry + 70);
      ctx.stroke();
    }
  };


  var lLegs = {
    lx: uLegs.lx - 10, // 170
    ly: uLegs.ly + 70, // 250
    rx: uLegs.rx + 10, // 230
    ry: uLegs.ry + 70, // 250
    color: 'black',
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.lx, this.ly + 30);
      ctx.moveTo(this.rx, this.ry);
      ctx.lineTo(this.rx, this.ry + 30);
      ctx.stroke();
    }
  };

  var feet = {
    lx: lLegs.lx, // 170
    ly: lLegs.ly + 30, // 280
    elx: lLegs.lx - 10,
    ely: lLegs.ly + 30, // 280
    rx: lLegs.rx, // 230
    ry: lLegs.ry + 30, // 280
    color: 'black',
    vx: 5,
    vy: 1,
    isVisible: true,
    draw: function() {
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = "black";
      ctx.moveTo(this.lx, this.ly);
      ctx.lineTo(this.elx, this.ely);
      ctx.moveTo(this.rx, this.ry);
      ctx.lineTo(this.rx + 10, this.ry);
      ctx.stroke();
    }
  };


function clear() {
  ctx.fillStyle = 'rgba(255,255,255,1)';
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  head.draw();
  hair.draw();
  eyeballs.draw();
  ctx.save();

  eyes.draw();
  mouth.draw();

  ctx.save();  

  ctx.restore();

  raf = window.requestAnimationFrame(draw);
}

function tick() {
      time = (new Date()).getTime() / 1000 - startTime;
      for (var i = 0 ; i < canvases.length ; i++)
         if (canvases[i].update !== undefined) {
      var canvas = canvases[i];
            var g = canvas.getContext('2d');
            g.clearRect(0, 0, canvas.width, canvas.height);
            canvas.update(g);
         }
      setTimeout(tick, 1000 / 60);
   }

tick();



// add button event listeners

document.getElementById('smile').addEventListener('click', function() {
  intervalSmile = window.setInterval(smile, 20);
}, false);

function smile(){
  var m = mouth;
  m.isVisible = false;
  draw();

  m.y = 45;
  m.angle = 0;
  m.length *= 1.1;
    if (m.length > Math.PI) {
      m.length = Math.PI;
    }

    m.isVisible = true;
    draw();
}

document.getElementById('lost').addEventListener('click', function() {
  intervalMind = window.setInterval(loseMind, 50);
}, false);

function loseMind(){
  var h = head;
    h.isVisible = false;
  draw();

  h.x += h.vx;
  h.y += h.vy;
  for (var i = 1; i < 8; i++) {
    h.radius *= Math.sin(time);
  };

    h.isVisible = true;
    draw();
}

document.getElementById('silly').addEventListener('click', function() {
  intervalEyes = window.setInterval(googlyEyes, 50);
}, false);

function googlyEyes(){
  var e = eyes;
    eyes.isVisible = false;
  draw();

  e.radius = 4;
  for (var i = 1; i < 5; i++) {
    e.x += (e.vx * .05 * Math.cos(time));
    e.y -= (e.vy * .05 * Math.cos(time));
    
  };

  e.isVisible = true;
  draw();
}

document.getElementById('tap').addEventListener('click', function() {
  intervalTap = window.setInterval(tapFoot, 50);
}, false);

document.getElementById('dance').addEventListener('click', function() {
  intervalHips = window.setInterval(moveHips, 20);
}, true);

document.getElementById('stop').addEventListener('click', function() {
  window.clearInterval(intervalTap);
  window.clearInterval(intervalHips);
  window.clearInterval(intervalSmile);
  window.clearInterval(intervalMind);
  window.clearInterval(intervalEyes);
  reset();
}, false);

function reset(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  head.draw();
  hair.draw();
  eyes.draw();
  mouth.draw();
  draw();
}

//draw();


head.draw();
hair.draw();
eyeballs.draw();
eyes.draw();
mouth.draw();
ctx.save();



</script>
